<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/underscore@1.12.1/underscore-min.js"></script>

   <script>
    var names = {
    "Marta": 10,
    "Niklas": 10,
    "Christoffer": 20,
    "Petter": 10,
    "Jakob": 10,
    "Mia": 6,
    "Andreas": 5,
    "Karolina": 5,
    "Carl": 5,
    "David": 3,
    "Jarle": 1,
};

function reset() {
    clearTimeout(tid);
    $('#names').empty();
    _.each(names, function(count, name) {
        for (var i = 0; i < count; i++) {
            var nameDiv = $('<div class="name alive"/>').text(name);
            
            if (i == 0) $('#names').append(nameDiv);
            else {
                var nameDivs = $('#names .name'),
                    index = ~~(Math.random() * nameDivs.length);
    
                nameDivs.eq(index)[~~(Math.random() * 2) ? 'before' : 'after'](nameDiv);
            }
        }
    });
}

var tid;
function pickWinner() {
    clearTimeout(tid);

    var num = $('.alive').length,
        i = ~~(Math.random() * num--);
    
    $('.alive').eq(i).removeClass('alive').animate({opacity: '0', transform: 'scale(1.5)'});
    
    if (num > 1) tid = setTimeout(arguments.callee, 10000/Math.pow(num, 1.1));
    else {
        $('.alive').animate({
            fontSize: '54px'
        }, 2000);
    }
}
        
$('#go').click(pickWinner);
$('#reset').click(reset);

reset();
  </script>
  <title>RaffleApp</title>
</head>

<body>
  <main>
    <button id="go">Pick a winner</button><button id="reset">Reset</button><br>
    <div id="names"></div>
  </main>
</body>
 

</html>
